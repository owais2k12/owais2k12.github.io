I"ú)<h4 id="ä½¿ç”¨enumerateåå»åºåˆ—è¿­ä»£çš„ç´¢å¼•å’Œå€¼">â‘¥ä½¿ç”¨enumerate()åå»åºåˆ—è¿­ä»£çš„ç´¢å¼•å’Œå€¼</h4>

<p>å¯¹äºä¸€ä¸ª<code class="language-plaintext highlighter-rouge">list</code> : <code class="language-plaintext highlighter-rouge">li = ['a', 'b', 'c', 'd', 'e', 'f']</code></p>

<p>ä¸€æ¬¡è·å¾—å…¶ä¸­çš„å˜é‡åŠç´¢å¼•æœ‰ä¸‹é¢å‡ ç§æ–¹æ³•ï¼š</p>

<h6 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€ï¼š</h6>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">li</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'index:'</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="s">'element:'</span><span class="p">,</span> <span class="n">i</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>

<h6 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒï¼š</h6>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">li</span><span class="p">)):</span>
    <span class="k">print</span> <span class="s">'index:'</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">'element:'</span><span class="p">,</span> <span class="n">li</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</code></pre></div></div>

<h6 id="æ–¹æ³•ä¸‰">æ–¹æ³•ä¸‰ï¼š</h6>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">li</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">'index:'</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="s">'element:'</span><span class="p">,</span> <span class="n">li</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</code></pre></div></div>

<h6 id="æ–¹æ³•å››">æ–¹æ³•å››ï¼š</h6>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">li</span><span class="p">)),</span> <span class="n">li</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">'index:'</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">'element:'</span><span class="p">,</span> <span class="n">e</span>
</code></pre></div></div>

<h6 id="æ–¹æ³•äº”">æ–¹æ³•äº”ï¼š</h6>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">li</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">'index:'</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">'element:'</span><span class="p">,</span> <span class="n">e</span>
</code></pre></div></div>

<p>å¯¹äºå­—å…¸ä¾¿åˆ©è¿­ä»£åˆ™ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dict1</span> <span class="o">=</span> <span class="p">{</span><span class="s">'a'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'b'</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">dict1</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span>
</code></pre></div></div>

<h4 id="ä½¿ç”¨withè‡ªåŠ¨å…³é—­èµ„æº">â‘¦ä½¿ç”¨withè‡ªåŠ¨å…³é—­èµ„æº</h4>

<p>æ–‡ä»¶å†™å…¥ä¸€ä¾‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; f = open('test.txt', 'w')
&gt;&gt;&gt; f.write('test')
</code></pre></div></div>

<p>è¿™æ ·ç»“æŸä¼šå‘ç°æ–‡ä»¶å¹¶æ²¡æœ‰å†…å®¹ï¼ŒåŸå› æ˜¯åœ¨æ“ä½œå®Œæˆåå¿˜è®°å…³é—­äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è¯†ï¼ŒäºŒä½¿ç”¨withå°±ä¸ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'test.txt'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">'test'</span><span class="p">)</span>
</code></pre></div></div>

<p>withè¯­å¥å¯ä»¥åœ¨ä»£ç å—æ‰§è¡Œå®Œæ¯•åè¿˜åŸè¿›å…¥è¯¥ä»£ç å—çš„ç°åœºã€‚åŒ…å«æœ‰withè¯­å¥çš„ä»£ç å—çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>

<ol>
  <li>
    <p>è®¡ç®—è¡¨è¾¾å¼ çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡ã€‚</p>
  </li>
  <li>
    <p>åŠ è½½ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡çš„<code class="language-plaintext highlighter-rouge">__exit__()</code>æ–¹æ³•ä»¥å¤‡ç”¨ã€‚</p>
  </li>
  <li>
    <p>è°ƒç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡çš„<code class="language-plaintext highlighter-rouge">__enter__()</code>æ–¹æ³•ã€‚</p>
  </li>
  <li>
    <p>å¦‚æœwithè¯­å¥ä¸­è®¾ç½®äº†ç›®æ ‡å¯¹è±¡ï¼Œåˆ™å°†<code class="language-plaintext highlighter-rouge">__enter__()</code>æ–¹æ³•çš„è¿”å›å€¼å¤åˆ¶ç»™ç›®æ ‡å¯¹è±¡ã€‚</p>
  </li>
  <li>
    <p>æ‰§è¡Œwithä¸­çš„ä»£ç å—ã€‚</p>
  </li>
  <li>
    <p>å¦‚æœæ­¥éª¤5ä¸­çš„ä»£ç æ­£å¸¸ç»“æŸï¼Œè°ƒç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡çš„<code class="language-plaintext highlighter-rouge">__exit__()</code>æ–¹æ³•ï¼Œå…¶è¿”å›å€¼ç›´æ¥å¿½ç•¥ã€‚</p>
  </li>
  <li>
    <p>å¦‚æœæ­¥éª¤5ä¸­çš„ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œè°ƒç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡çš„<code class="language-plaintext highlighter-rouge">__exit__()</code>æ–¹æ³•ï¼Œå¹¶å°†å¼‚å¸¸ç±»å‹ã€å€¼åŠtracebackä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code class="language-plaintext highlighter-rouge">__exit__()</code>ã€‚å¦‚æœ<code class="language-plaintext highlighter-rouge">__exit__()</code>è¿”å›å€¼ä¸ºfalseï¼Œåˆ™å¼‚å¸¸ä¼šè¢«é‡æ–°æŠ›å‡ºï¼›å¦‚æœå…¶è¿”å›å€¼ä¸ºtrueï¼Œå¼‚å¸¸ä¼šè¢«æŒ‚èµ·ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œã€‚</p>
  </li>
</ol>

<p>å¯¹äº<code class="language-plaintext highlighter-rouge">__enter__()</code>å’Œ<code class="language-plaintext highlighter-rouge">__exit__()</code>æ–¹æ³•ï¼š</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">__enter__()</code>ï¼šè¿›å…¥ä¸å½¢å¼çš„ä¸Šä¸‹æ–‡ï¼Œè¿”å›è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ç›¸å…³çš„å¯¹è±¡ï¼Œwithè¯­å¥ä¸­ä¼šå°†è¿™ä¸ªè¿”å›å€¼ç»‘å®šåˆ°ç›®æ ‡å¯¹è±¡ã€‚</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">__exit__(exception_type, exception_value, traceback)</code>ï¼šé€€å‡ºè¿è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå®šä¹‰åœ¨å—æ‰§è¡Œï¼ˆæˆ–ç»ˆæ­¢ï¼‰ä¹‹åä¸Šä¸‹æ–‡ç®¡ç†å™¨åº”è¯¥åšä»€ä¹ˆã€‚å®ƒå¯ä»¥å¤„ç†å¼‚å¸¸ï¼Œæ¸…ç†ç°åœºæˆ–è€…å¤„ç†withå—ä¸­è¯­å¥æ‰§è¡Œå®Œæˆåéœ€è¦å¤„ç†çš„åŠ¨ä½œã€‚</p>
  </li>
</ul>

<p>è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸€ä¾‹ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">'entering...'</span>
        
    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exceprion_type</span><span class="p">,</span> <span class="n">exception_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">'leaving...'</span>
        <span class="k">if</span> <span class="n">exception_type</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">'no exceptions!'</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">exception_type</span> <span class="ow">is</span> <span class="nb">ValueError</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">'value error!'</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">'other error'</span>
            <span class="k">return</span> <span class="bp">True</span>
</code></pre></div></div>

<p>å¼•ç”¨æ­¤classï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; with  MyClass():
â€¢â€¢â€¢     print 'testing...'
â€¢â€¢â€¢     raise(ValueError)
â€¢â€¢â€¢
entering...
testing...
leaving...
value error!
&gt;&gt;&gt; 
&gt;&gt;&gt; with MyClass():
â€¢â€¢â€¢     print 'testing'
â€¢â€¢â€¢
entering...
testing...
leaving...
no exceptions!
&gt;&gt;&gt;
</code></pre></div></div>

<p>é™¤äº†<code class="language-plaintext highlighter-rouge">__enter__()</code>å’Œ<code class="language-plaintext highlighter-rouge">__exit__()</code>æ–¹æ³•ï¼Œè¿˜æœ‰<code class="language-plaintext highlighter-rouge">contextlib</code>æ¨¡å—å¯ä»¥è¾…åŠ©ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œè¯¥æ¨¡å—æ˜¯é€šè¿‡Generatorå®ç°çš„ï¼Œcontextlibä¸­çš„contextmanagerä½œä¸ºè£…é¥°å™¨æ¥æä¾›ä¸€ç§é’ˆå¯¹å‡½æ•°çº§åˆ«çš„ä¸Šä¸‹æ–‡ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥ç›´æ¥è¯´ä½œç”¨å‡½æ•°\å¯¹è±¡è€Œä¸ç”¨å»å…³å¿ƒ<code class="language-plaintext highlighter-rouge">__enter__()</code>å’Œ<code class="language-plaintext highlighter-rouge">__exit__()</code>æ–¹æ³•çš„å…·ä½“å®ç°ã€‚å…·ä½“å¯ä»¥ç™¾åº¦ã€‚</p>
:ET